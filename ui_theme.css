/* ui_theme.css  v1  - Night Market / Pop & Stylish Unified Theme */

/* =========================
   THEME TOKENS
========================= */
:root{
  /* header */
  --hdr-bg: #51565f;      /* 今のserveの上部に寄せた渋いグレー */
  --hdr-ink: #ffffff;
  --hdr-muted: rgba(255,255,255,.72);

  /* accent (neon but controlled) */
  --a1:#9b5cff;           /* purple */
  --a2:#43c7ff;           /* cyan */
  --a3:#33d17a;           /* green */
  --danger:#ff5a7a;

  /* body background (make it clearly colored) */
  --bg1:#eef2ff;          /* lavender tint */
  --bg2:#ecfeff;          /* cyan tint */
  --bg3:#f7f7fb;          /* neutral */

  /* surface */
  --card:#ffffff;
  --ink:#111827;
  --muted:#6b7280;
  --line: rgba(15,23,42,.14);

  /* shadows */
  --shadow: 0 18px 45px rgba(17,24,39,.18);
  --shadow2: 0 10px 22px rgba(17,24,39,.14);

  /* radius */
  --r1: 16px;
  --r2: 22px;
}

/* =========================
   GLOBAL BASE
========================= */
*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: system-ui, -apple-system, "Segoe UI", "Noto Sans JP", "Hiragino Kaku Gothic ProN", sans-serif;
  color: var(--ink);

  /* ✅ 背景を「負けない」ように、薄い色面をしっかり敷く */
  background:
    radial-gradient(900px 650px at 10% 0%, rgba(155,92,255,.20), transparent 60%),
    radial-gradient(900px 650px at 110% 15%, rgba(67,199,255,.18), transparent 55%),
    radial-gradient(900px 700px at 35% 120%, rgba(51,209,122,.14), transparent 55%),
    linear-gradient(180deg, var(--bg1), var(--bg3) 35%, var(--bg2));
}

/* =========================
   COMMON LAYOUT
========================= */
.wrap{ max-width: 980px; margin:0 auto; padding: 10px 12px 30px; }
.grid{ display:flex; flex-direction:column; gap:14px; }

/* =========================
   HEADER (Unified)
========================= */
header.appHeader{
  position:sticky;
  top:0;
  z-index:20;
  background: var(--hdr-bg);
  border-bottom: 1px solid rgba(255,255,255,.18);
}

/* 1行ヘッダーの基本 */
.headRow{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:14px;
  padding: 12px 12px;
}

/* brand */
.brandTitle{
  font-weight: 1100;
  letter-spacing: 1.2px;
  text-transform: uppercase;
  font-size: 28px;
  line-height: 1;
  background: linear-gradient(90deg, var(--a1), var(--a2));
  -webkit-background-clip:text;
  background-clip:text;
  color: transparent;
}

/* nav pills */
.topNav{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
.navItem{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding: 10px 14px;
  border-radius: 999px;
  border: 2px solid rgba(255,255,255,.60);
  color: var(--hdr-ink);
  text-decoration:none;
  font-weight: 1000;
  background: rgba(255,255,255,.06);
  transition: transform .06s ease, filter .12s ease, background .12s ease;
}
.navItem:active{ transform: scale(.98); }
.navItem.active{
  border-color: rgba(67,199,255,.90);
  box-shadow: 0 0 0 4px rgba(67,199,255,.18);
}

/* shop badge + button */
.shopBar{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
.badge-open,.badge-close{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding: 10px 14px;
  border-radius:999px;
  font-weight: 1100;
  color: #fff;
  border: 2px solid rgba(255,255,255,.30);
  background: rgba(0,0,0,.16);
}
.dot-open,.dot-close{ width:10px; height:10px; border-radius:50%; }
.dot-open{ background: var(--a3); box-shadow:0 0 12px rgba(51,209,122,.35); }
.dot-close{ background: var(--danger); box-shadow:0 0 12px rgba(255,90,122,.35); }

.btn{
  border: 2px solid var(--line);
  background: rgba(255,255,255,.92);
  color: #111;
  padding: 10px 14px;
  border-radius: 14px;
  font-weight: 1100;
  cursor:pointer;
  transition: transform .06s ease, filter .12s ease;
}
.btn:active{ transform: scale(.98); }
.btn:disabled{ opacity:.55; cursor:not-allowed; }

.btn-close{
  background: rgba(255,90,122,.16);
  border-color: rgba(255,90,122,.55);
  color:#fff;
}
.btn-open{
  background: rgba(51,209,122,.16);
  border-color: rgba(51,209,122,.55);
  color:#fff;
}

/* tool row */
.toolRow{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding: 0 12px 12px;
}
.toolRight{
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:flex-end;
  flex-wrap:nowrap;
  overflow-x:auto;
  white-space:nowrap;
  padding-bottom: 4px;
}
.pill{
  padding: 10px 14px;
  border-radius:999px;
  border: 2px solid rgba(255,255,255,.55);
  background: rgba(255,255,255,.06);
  color:#fff;
  font-weight:1100;
  min-width: 4.5em;
  text-align:center;
}
select, input[type="search"], input[type="text"], input[type="number"]{
  border: 2px solid rgba(255,255,255,.50);
  background: rgba(255,255,255,.92);
  color:#111;
  padding:10px 12px;
  border-radius: 14px;
  font-weight: 1000;
}
select:focus, input:focus{
  outline:none;
  box-shadow: 0 0 0 4px rgba(155,92,255,.20);
  border-color: rgba(155,92,255,.65);
}

/* =========================
   CARD (make it pop & float)
========================= */
.card{
  background: var(--card);
  border-radius: var(--r2);

  /* ✅ 太い「外枠」＋内側の縁（2重）でポップに */
  border: 4px solid rgba(67,199,255,.35);
  box-shadow: var(--shadow);

  padding: 14px;
  position:relative;
}
.card::before{
  content:"";
  position:absolute;
  inset: 8px;
  border-radius: calc(var(--r2) - 8px);
  border: 3px solid rgba(155,92,255,.22);
  pointer-events:none;
}

/* card header row */
.row{ display:flex; align-items:flex-start; justify-content:space-between; gap:12px; }
.name{ font-weight: 1100; font-size: 18px; letter-spacing:.2px; }
.price{ font-weight: 1200; font-size: 18px; }
.muted{ color: var(--muted); font-size: 12px; }
.divider{ height:1px; background: rgba(15,23,42,.10); margin: 12px 0; }

/* actions */
.actions{ display:flex; gap:10px; justify-content:flex-end; margin-top: 12px; flex-wrap:wrap; }
.btnOk{
  background: rgba(51,209,122,.18);
  border-color: rgba(51,209,122,.50);
  color:#0b3b24;
}
.btnDanger{
  background: rgba(255,90,122,.16);
  border-color: rgba(255,90,122,.55);
  color:#6a0e22;
}

/* =========================
   ITEMS (mobile-safe wrapping)
========================= */
.list{
  list-style:none;
  padding:0;
  margin: 12px 0 0;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.lineRow{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;

  padding: 12px 12px;
  border-radius: 16px;
  border: 3px solid rgba(17,24,39,.10);
  background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.70));
  box-shadow: var(--shadow2);
}
.lineName{
  font-size: 18px;
  font-weight: 1100;
  letter-spacing:.2px;

  /* ✅ スマホで崩れない */
  flex: 1 1 auto;
  min-width: 0;
  overflow-wrap:anywhere;
}
.lineMeta{
  display:flex;
  align-items:baseline;
  gap:12px;
  flex: 0 0 auto;
}
.lineQty{
  font-size: 17px;
  font-weight: 1100;
  color: #111;            /* ✅ 数量/金額が白くならない */
}
.lineSum{
  font-size: 18px;
  font-weight: 1200;
  color: #111;            /* ✅ 金額は黒でOK */
  opacity: .90;
}

/* 좁은 화면에서는 meta를 아래로 떨어뜨릴 수 있게 */
@media (max-width: 480px){
  .lineRow{ align-items:flex-start; flex-direction:column; }
  .lineMeta{ width:100%; justify-content:flex-end; }
}

/* =========================
   MESSAGES / DETAILS
========================= */
.msg{
  margin: 10px 0;
  padding: 10px 12px;
  border-radius: 14px;
  border: 2px solid rgba(17,24,39,.12);
  background: rgba(255,255,255,.88);
}
.msg.err{
  border-color: rgba(255,90,122,.40);
  background: rgba(255,90,122,.10);
  color:#7a0f28;
}

details{
  border: 2px solid rgba(17,24,39,.10);
  background: rgba(255,255,255,.88);
  border-radius: 18px;
  padding:10px 12px;
}
summary{ cursor:pointer; font-weight:1100; }
.otherRow{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:10px 0;
  border-top: 1px dashed rgba(17,24,39,.18);
  cursor:pointer;
}
.otherRow:first-of-type{ border-top:none; }

/* ===== stronger background (keep header as-is) ===== */
body{
  /* いまの薄さを解消：少し濃いグレー寄り＋やわらかい色味 */
  background:
    radial-gradient(900px 600px at 15% -10%, rgba(168,85,247,.10), transparent 55%),
    radial-gradient(900px 600px at 110% 10%, rgba(34,211,238,.10), transparent 55%),
    radial-gradient(900px 700px at 35% 120%, rgba(34,197,94,.08), transparent 60%),
    linear-gradient(180deg, rgba(0,0,0,.06), transparent 40%),
    #e6e9f2; /* ★ここが濃さの本体（好みで #dde2ee 〜 #e8ebf5） */
}

/* カードをさらに浮かせる（ポップ寄り） */
.card{
  box-shadow: 0 18px 45px rgba(0,0,0,.18) !important;
}

/* ===== mobile: item lines compact & no awkward stretching ===== */
@media (max-width: 520px){

  /* 内訳の行：grid 2列（左：商品名 / 右：数量+金額） */
  .card .list .lineRow{
    display: grid !important;
    grid-template-columns: 1fr auto;
    align-items: center;
    gap: 6px 10px;
    padding: 10px 10px !important;     /* 余白を詰めて間延び防止 */
  }

  .card .list .lineName{
    font-size: 16px !important;
    line-height: 1.15;
    min-width: 0;
    overflow-wrap: anywhere;           /* 長い名前でもOK */
  }

  .card .list .lineMeta{
    justify-self: end;
    gap: 10px !important;
    white-space: nowrap;              /* 数量/金額は折り返さない */
  }

  .card .list .lineQty{
    font-size: 15px !important;
  }

  /* 金額：白すぎて見えない → 落ち着いた濃いグレーに */
  .card .list .lineSum{
    font-size: 16px !important;
    font-weight: 1100 !important;
    color: rgba(20,24,32,.78) !important;
    background: none !important;       /* カラフル演出はOFF */
    -webkit-text-fill-color: initial !important;
  }
}
