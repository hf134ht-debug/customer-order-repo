<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Order Counter</title>

  <!-- ★ 統一CSS（Serve Stationと同じ単一CSS） -->
  <link rel="stylesheet" href="./ui.css?v=1">
</head>

<body>
  <header>
    <div class="wrap">
      <div class="topbar">
        <div class="brand">
          <div class="title">Order Counter</div>
        </div>
        <div class="pill totalTop" id="totalTop">合計 ¥0</div>
      </div>

      <div class="tabs">
        <button class="tabbtn active" id="tabPos">① 注文</button>
        <button class="tabbtn" id="tabMy">② 注文確認</button>
      </div>

      <div id="editBanner" class="msg ok" style="display:none;"></div>
    </div>
  </header>

  <main class="wrap">
    <div id="msgArea"></div>

    <!-- ① 注文画面 -->
    <section id="viewPos">
      <!-- ★追加：検索/売切非表示/密度 -->
      <div class="panel">
        <div class="controls">
          <input id="searchInput" class="inp" type="text" placeholder="商品名で検索…" />
          <select id="densitySel" class="sel" title="表示密度">
            <option value="3">表示：標準</option>
            <option value="6">表示：コンパクト</option>
          </select>
          <label class="chip" title="売切を隠す">
            <input id="hideSoldOut" type="checkbox">
            売切非表示
          </label>
        </div>
        <div class="muted" style="margin-top:8px;">※検索は端末内フィルタ（GASは増やしません）</div>
      </div>

      <div id="productsLoading" class="msg">商品を読み込み中…</div>
      <div class="grid" id="productList"></div>
    </section>

    <!-- ② 注文確認・変更画面 -->
    <section id="viewMy" style="display:none;">
      <div class="itemCard">
        <div class="name">注文を確認</div>
        <div class="muted">注文確定後に表示される「注文ID」で確認できます。</div>

        <div class="inline" style="margin-top:10px;">
          <input id="orderIdInput" class="inp" type="text" placeholder="注文ID（例：O2025...）">
          <button class="btn" id="btnLoadMy">表示</button>
        </div>

        <div class="muted" style="margin-top:8px;">
          直近の注文がある場合：
          <button class="btn btnGhost" id="btnLoadLast">直近の注文</button>
        </div>
      </div>

      <div id="myOrderArea" style="margin-top:10px;"></div>
    </section>
  </main>

  <!-- 下部 合計＋確定 -->
  <div class="bottomBar">
    <div class="bottomInner">
      <div class="bottomTotal" id="totalBottom">合計 ¥0</div>
      <button class="btn" id="btnEditCancel" style="display:none;">変更キャンセル</button>
      <button class="btn" id="btnClear">クリア</button>
      <button class="btn btnPrimary" id="btnCheckout">注文確定</button>
    </div>
  </div>

  <!-- overlay / modal -->
  <div class="overlay" id="overlay">
    <div class="modal" id="modal">
      <h3 id="modalTitle">確認</h3>
      <div id="modalBody"></div>
      <div class="actions" id="modalActions"></div>
    </div>
  </div>

  <!-- ★ GAS URLだけHTML側で渡す（あなたのexecをそのまま使う） -->
  <script>
    window.GAS_WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzeeGTJKZXHsVEw8DMz_QahMsnbqAUzDM3D_9mnv1LpVRxIitpL0F3xlCTwKUjV0OURzQ/exec";
  </script>

  <script src="./customer.js" defer></script>
  <script src="./ui.js?v=1"></script>
</body>
</html>

