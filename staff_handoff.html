<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>SERVE STATION</title>

  <!-- ✅ CSSは統合版1本だけ -->
  <link rel="stylesheet" href="./ui.css?v=1">
</head>

<body>
<header class="appHeader">
  <div class="wrap headRow">
    <div class="brand">
      <div class="brandTitle">SERVE STATION</div>
    </div>

    <nav class="topNav">
      <a href="./staff_handoff.html" class="navItem active">受け渡し</a>
      <a href="./history.html" class="navItem">履歴</a>
      <a href="./sales.html" class="navItem">売上</a>
      <a href="./owner.html" class="navItem">設定</a>
    </nav>

    <div id="shopBar" class="shopBar">
      <span id="shopState" class="badge-open">
        <span class="dot-open"></span><span>受付：営業中</span>
      </span>
      <button id="btnToggleShop" class="btn btn-close">閉店（受付停止）</button>
    </div>
  </div>

  <div class="wrap toolRow">
    <div class="toolLeft">
      <span class="pill" id="countPill">0件</span>
    </div>

    <div class="ctrls toolRight">
      <select id="viewMode">
        <option value="3">通常（3件）</option>
        <option value="6">コンパクト（6件）</option>
      </select>

      <select id="sortMode">
        <option value="created">受付順</option>
        <option value="elapsed_desc">経過長い順</option>
        <option value="rank">手動順</option>
      </select>

      <select id="filterMode">
        <option value="">フィルタ：全て</option>
      </select>

      <button class="btn" id="btnRefresh">更新</button>

      <select id="autoInterval">
        <option value="10">自動 10秒</option>
        <option value="30" selected>自動 30秒</option>
        <option value="60">自動 60秒</option>
      </select>

      <!-- ✅ btnPrimary はCSS競合の元になりやすいのでやめて .btn に統一 -->
      <button class="btn" id="btnAuto">自動更新：OFF</button>
    </div>
  </div>

  <div class="wrap">
    <div id="msgArea"></div>
  </div>
</header>

<main class="wrap">
  <div class="grid" id="orderList"></div>

  <div class="sectionTitle">その他の注文</div>
  <details id="othersBox">
    <summary id="othersSummary">その他の注文（0件）</summary>
    <div id="othersList"></div>
  </details>
</main>

<!-- 編集モーダル -->
<div class="overlay" id="overlay" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true">
    <div class="modalHead">
      <div>
        <div class="modalTitle" id="mTitle">編集</div>
        <div class="mini" id="mSub"></div>
      </div>
      <div style="display:flex; gap:8px; align-items:center;">
        <button class="btn" id="mClose">閉じる</button>
      </div>
    </div>

    <div id="mMsg"></div>

    <div class="divider"></div>

    <div><b>内訳（数量変更・0で削除）</b></div>
    <div id="mItems"></div>

    <div class="divider"></div>

    <div><b>品目追加</b></div>
    <div class="searchBox">
      <input type="search" id="mSearch" placeholder="商品名で検索" style="flex:1;">
    </div>
    <div class="prodList" id="mProds"></div>

    <div class="divider"></div>

    <div class="row">
      <div><b>合計</b></div>
      <div class="price" id="mTotal">¥0</div>
    </div>

    <div class="stickyFoot">
      <div class="actions">
        <!-- ✅ btnPrimary はやめて .btn に統一 -->
        <button class="btn" id="mSave">保存</button>
        <button class="btn btnOk" id="mHanded">受け渡し完了</button>
        <button class="btn btnDanger" id="mCancel">キャンセル</button>
      </div>
      <div class="muted" style="margin-top:6px;">※完了/キャンセルは確認ダイアログあり</div>
    </div>
  </div>
</div>

<script>
  window.GAS_WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzeeGTJKZXHsVEw8DMz_QahMsnbqAUzDM3D_9mnv1LpVRxIitpL0F3xlCTwKUjV0OURzQ/exec";
</script>

<script src="./handoff.js"></script>

<!-- もし ui.js が「モーダル/共通UIのJS」なら残してOK。不要なら消してOK -->
<script src="./ui.js?v=1"></script>
</body>
</html>
